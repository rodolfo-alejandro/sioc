{% extends "layouts/base.html" %}

{% block title %}Ver Intervención - SIOC{% endblock %}

{% block content %}
<div class="page-header">
    <h1><i class="bi bi-file-earmark-text"></i> Detalle de Intervención</h1>
    <p class="text-muted">Información completa de la intervención</p>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Información General</h5>
            </div>
            <div class="card-body">
                <dl class="row">
                    <dt class="col-sm-4">Tipo de Intervención:</dt>
                    <dd class="col-sm-8"><span class="badge bg-primary">{{ intervencion.tipo_intervencion }}</span></dd>
                    
                    <dt class="col-sm-4">Fecha y Hora:</dt>
                    <dd class="col-sm-8">{{ intervencion.fecha_hora.strftime('%d/%m/%Y %H:%M:%S') if intervencion.fecha_hora else 'N/A' }}</dd>
                    
                    <dt class="col-sm-4">Usuario:</dt>
                    <dd class="col-sm-8">{{ intervencion.usuario.username if intervencion.usuario else 'N/A' }}</dd>
                    
                    <dt class="col-sm-4">Unidad:</dt>
                    <dd class="col-sm-8">{{ intervencion.unidad.nombre if intervencion.unidad else 'N/A' }}</dd>
                </dl>
            </div>
        </div>
        
        {% if intervencion.persona %}
        <div class="card mt-3">
            <div class="card-header">
                <h5 class="mb-0">Datos de la Persona</h5>
            </div>
            <div class="card-body">
                <dl class="row">
                    <dt class="col-sm-4">DNI:</dt>
                    <dd class="col-sm-8">{{ intervencion.persona.dni }}</dd>
                    
                    <dt class="col-sm-4">Nombre Completo:</dt>
                    <dd class="col-sm-8">{{ intervencion.persona.nombre_completo }}</dd>
                    
                    <dt class="col-sm-4">Fecha de Nacimiento:</dt>
                    <dd class="col-sm-8">{{ intervencion.persona.fecha_nacimiento.strftime('%d/%m/%Y') if intervencion.persona.fecha_nacimiento else 'N/A' }}</dd>
                    
                    <dt class="col-sm-4">Domicilio:</dt>
                    <dd class="col-sm-8">{{ intervencion.persona.direccion or 'N/A' }}</dd>
                    
                    <dt class="col-sm-4">Teléfono:</dt>
                    <dd class="col-sm-8">{{ intervencion.persona.telefono or 'N/A' }}</dd>
                </dl>
            </div>
        </div>
        {% endif %}
        
        {% if intervencion.vehiculo %}
        <div class="card mt-3">
            <div class="card-header">
                <h5 class="mb-0">Datos del Vehículo</h5>
            </div>
            <div class="card-body">
                <dl class="row">
                    <dt class="col-sm-4">Patente:</dt>
                    <dd class="col-sm-8"><strong>{{ intervencion.vehiculo.patente }}</strong></dd>
                    
                    <dt class="col-sm-4">Marca:</dt>
                    <dd class="col-sm-8">{{ intervencion.vehiculo.marca.nombre if intervencion.vehiculo.marca else 'N/A' }}</dd>
                    
                    <dt class="col-sm-4">Modelo:</dt>
                    <dd class="col-sm-8">{{ intervencion.vehiculo.modelo.nombre if intervencion.vehiculo.modelo else 'N/A' }}</dd>
                    
                    <dt class="col-sm-4">Color:</dt>
                    <dd class="col-sm-8">{{ intervencion.vehiculo.color.nombre if intervencion.vehiculo.color else 'N/A' }}</dd>
                </dl>
            </div>
        </div>
        {% endif %}
        
        {% if intervencion.observaciones %}
        <div class="card mt-3">
            <div class="card-header">
                <h5 class="mb-0">Observaciones</h5>
            </div>
            <div class="card-body">
                <p>{{ intervencion.observaciones }}</p>
            </div>
        </div>
        {% endif %}
    </div>
    
    {% if intervencion.ubicacion %}
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Ubicación</h5>
            </div>
            <div class="card-body">
                <p><strong>Coordenadas:</strong></p>
                <p>Latitud: {{ intervencion.ubicacion.latitud }}</p>
                <p>Longitud: {{ intervencion.ubicacion.longitud }}</p>
                {% if intervencion.ubicacion.barrio %}
                <p><strong>Barrio:</strong> {{ intervencion.ubicacion.barrio.nombre }}</p>
                {% endif %}
            </div>
        </div>
    </div>
    {% endif %}
</div>

<div class="mt-3">
    <a href="{{ url_for('intervenciones.listar') }}" class="btn btn-secondary">
        <i class="bi bi-arrow-left"></i> Volver a la lista
    </a>
</div>
{% endblock %}

