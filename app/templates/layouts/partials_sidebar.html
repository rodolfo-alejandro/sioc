<aside class="sidebar" id="sidebar">
    <div class="sidebar-content">
        <nav class="sidebar-nav">
            <ul class="nav flex-column">
                <!-- Registro -->
                <li class="nav-item">
                    <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#submenuRegistro">
                        <i class="bi bi-clipboard-data"></i> Registro
                        <i class="bi bi-chevron-down ms-auto"></i>
                    </a>
                    <ul class="nav flex-column collapse" id="submenuRegistro">
                        <li class="nav-item"><a class="nav-link submenu-item" href="#"><i class="bi bi-person"></i> Personas</a></li>
                        <li class="nav-item"><a class="nav-link submenu-item" href="#"><i class="bi bi-car-front"></i> Vehículos</a></li>
                        {% if current_user.has_permission('CONTROL_COMERCIAL_VIEW') %}
                        <li class="nav-item"><a class="nav-link submenu-item" href="{{ url_for('control_comercial.index') }}"><i class="bi bi-shop"></i> Comercios</a></li>
                        {% endif %}
                        {% if current_user.has_permission('CONTROL_EDUCATIVO_VIEW') %}
                        <li class="nav-item"><a class="nav-link submenu-item" href="{{ url_for('control_educativo.index') }}"><i class="bi bi-building"></i> Establecimientos</a></li>
                        {% endif %}
                        {% if current_user.has_permission('INTERVENCIONES_VIEW') %}
                        <li class="nav-item"><a class="nav-link submenu-item" href="{{ url_for('intervenciones.listar') }}"><i class="bi bi-file-earmark-text"></i> Intervenciones</a></li>
                        {% endif %}
                        {% if current_user.has_permission('INTERVENCIONES_CREATE') %}
                        <li class="nav-item"><a class="nav-link submenu-item" href="{{ url_for('intervenciones.identificacion_persona') }}"><i class="bi bi-person-check"></i> Identificar Persona</a></li>
                        <li class="nav-item"><a class="nav-link submenu-item" href="{{ url_for('intervenciones.control_vehicular') }}"><i class="bi bi-car-front"></i> Control Vehicular</a></li>
                        {% endif %}
                    </ul>
                </li>
                
                <!-- Prevención -->
                <li class="nav-item">
                    <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#submenuPrevencion">
                        <i class="bi bi-shield-exclamation"></i> Prevención
                        <i class="bi bi-chevron-down ms-auto"></i>
                    </a>
                    <ul class="nav flex-column collapse" id="submenuPrevencion">
                        <li class="nav-item"><a class="nav-link submenu-item" href="#"><i class="bi bi-bar-chart"></i> Estadísticas</a></li>
                        <li class="nav-item"><a class="nav-link submenu-item" href="#"><i class="bi bi-bell"></i> Alertas</a></li>
                        <li class="nav-item"><a class="nav-link submenu-item" href="#"><i class="bi bi-file-earmark-pdf"></i> Reportes</a></li>
                    </ul>
                </li>
                
                <!-- Investigación -->
                <li class="nav-item">
                    <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#submenuInvestigacion">
                        <i class="bi bi-search"></i> Investigación
                        <i class="bi bi-chevron-down ms-auto"></i>
                    </a>
                    <ul class="nav flex-column collapse" id="submenuInvestigacion">
                        <li class="nav-item"><a class="nav-link submenu-item" href="#"><i class="bi bi-headphones"></i> Escuchas</a></li>
                        {% if current_user.has_permission('RELACIONES_VIEW') %}
                        <li class="nav-item"><a class="nav-link submenu-item" href="{{ url_for('relaciones.index') }}"><i class="bi bi-diagram-3"></i> Relaciones</a></li>
                        {% endif %}
                        <li class="nav-item"><a class="nav-link submenu-item" href="#"><i class="bi bi-folder"></i> Evidencias</a></li>
                    </ul>
                </li>
                
                <!-- Operaciones -->
                <li class="nav-item">
                    <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#submenuOperaciones">
                        <i class="bi bi-gear"></i> Operaciones
                        <i class="bi bi-chevron-down ms-auto"></i>
                    </a>
                    <ul class="nav flex-column collapse" id="submenuOperaciones">
                        <li class="nav-item"><a class="nav-link submenu-item" href="#"><i class="bi bi-people"></i> Recursos</a></li>
                        {% if current_user.has_permission('OPERATIVOS_VIEW') %}
                        <li class="nav-item"><a class="nav-link submenu-item" href="{{ url_for('operativos.estado') }}"><i class="bi bi-geo-alt"></i> Operativo activo</a></li>
                        {% endif %}
                    </ul>
                </li>
                
                <!-- DataLab -->
                <li class="nav-item">
                    <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#submenuDataLab">
                        <i class="bi bi-database"></i> DataLab
                        <i class="bi bi-chevron-down ms-auto"></i>
                    </a>
                    <ul class="nav flex-column collapse show" id="submenuDataLab">
                        {% if current_user.has_permission('DATALAB_UPLOAD') %}
                        <li class="nav-item"><a class="nav-link submenu-item" href="{{ url_for('datalab.upload') }}"><i class="bi bi-cloud-upload"></i> Subir archivo</a></li>
                        {% endif %}
                        {% if current_user.has_permission('DATALAB_VIEW') %}
                        <li class="nav-item"><a class="nav-link submenu-item" href="{{ url_for('datalab.datasets') }}"><i class="bi bi-table"></i> Datasets</a></li>
                        {% endif %}
                        {% if current_user.has_permission('DATALAB_UPLOAD') %}
                        <li class="nav-item"><a class="nav-link submenu-item" href="{{ url_for('datalab.denuncias_upload') }}"><i class="bi bi-cloud-upload"></i> Cargar Denuncias</a></li>
                        {% endif %}
                        {% if current_user.has_permission('DATALAB_VIEW') %}
                        <li class="nav-item"><a class="nav-link submenu-item" href="{{ url_for('datalab.denuncias_dashboard') }}"><i class="bi bi-bar-chart-line"></i> Dashboard Denuncias</a></li>
                        {% endif %}
                    </ul>
                </li>
                
                <!-- Admin -->
                {% if current_user.has_permission('ADMIN_USERS') %}
                <li class="nav-item">
                    <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#submenuAdmin">
                        <i class="bi bi-shield-lock"></i> Admin
                        <i class="bi bi-chevron-down ms-auto"></i>
                    </a>
                    <ul class="nav flex-column collapse" id="submenuAdmin">
                        <li class="nav-item"><a class="nav-link submenu-item" href="{{ url_for('admin.users') }}"><i class="bi bi-people"></i> Usuarios</a></li>
                        <li class="nav-item"><a class="nav-link submenu-item" href="{{ url_for('admin.roles') }}"><i class="bi bi-person-badge"></i> Roles</a></li>
                    </ul>
                </li>
                {% endif %}
            </ul>
        </nav>
    </div>
</aside>

<!-- Overlay para mobile -->
<div class="sidebar-overlay" id="sidebarOverlay"></div>

